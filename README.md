# RF_Classifier

**What it does?**

This R script is a general-purpose random forest training and prediction tool. It reads in a CSV formatted file generated by the user, then, depending on whether or not a trained random forest (RF) is provided, it will either run under the "training mode" (RF not provided or invalid file path), or the "prediction mode". In the training mode, a leave-half-out cross-validation (LHOCV) is happening at the same time, along with the RF training.

The CSV file needs to follow this format:
- Column #1: The ID (should be unique)
- Column #2: The sequence class (or a run of "NA" or whatever for prediction mode).
- Column #3 and onwards: parameters to be used for training and prediction.

**Usage**

The script requires R packages "dplyr" and "randomForest" to run. In a Linux command window, run R and run the following:

        install.packages("dplyr")
        install.packages("randomForest")

Command:

        Rscript RF_classifier.r [Input csv] [RF RDS path (training mode) | NA (prediction mode)] [Output DIR] [1 (training mode) | 0 (prediction mode)]
        
Training mode example:

        Rscript RF_classifier.r training_data.csv NA test_train 1
        
Prediction mode example:

        Rscript RF_classifier.r prediction_data.csv test_train/rf_model.rds test_predict 0

**Outputs**

Training mode:

1. An RDS file of a R List object, containing the trained RF, the LHOCV ROC-curve of the RF with the AUC, and scores from LHOCV.
2. The LHOCV ROC-curve of the RF with the AUC as a CSV file.
3. The scores from LHOCV (one column per class) combined with the original data.

Prediction mode:

1. Prediction scores (one column per class) generated by the RF (i.e. the RDS file from training mode), combined with the original data.

**Notes**

This script is a wrapper of the R package "randomForest", that provides a command-line interface, automates the training and cross-validations in the training mode, and organize the prediction outcomes so that class scores (i.e. proportion of decision trees voting for a particular class) were juxtaposed to the input data.
